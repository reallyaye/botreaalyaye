<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–§–∏—Ç–Ω–µ—Å-WebApp</title>
  <link rel="stylesheet" href="/static/styles.css">
  <script>
    // Telegram Web App JS API: –±–µ—Ä—ë–º initDataUnsafe.user.id
    window.addEventListener('DOMContentLoaded', () => {
      if (window.Telegram && Telegram.WebApp) {
        const tg = window.Telegram.WebApp;
        tg.ready();

        const uid = tg.initDataUnsafe?.user?.id;
        if (uid) {
          const params = new URLSearchParams(window.location.search);
          if (!params.has('user_id')) {
            params.set('user_id', uid);
            // –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å ?user_id=‚Ä¶
            window.location.search = params.toString();
          }
        }
      }
    });
  </script>
</head>
<body>
  <header>
    <h1>üèãÔ∏è –§–∏—Ç–Ω–µ—Å-WebApp</h1>
    {% set uid = request.query_params.get("user_id", "") %}
    <nav>
      <a href="/?user_id={{ uid }}">–ì–ª–∞–≤–Ω–∞—è</a> |
      <a href="/profile?user_id={{ uid }}">–ü—Ä–æ—Ñ–∏–ª—å</a> |
      <a href="/workouts?user_id={{ uid }}">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</a>
    </nav>
    <hr>
  </header>
  <main>
    {% block content %}{% endblock %}
  </main>
  <footer>
    <hr>
    <small>¬© 2025 –§–∏—Ç–Ω–µ—Å-WebApp</small>
  </footer>
</body>
</html>
