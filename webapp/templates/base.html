<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <title>üèãÔ∏è –§–∏—Ç–Ω–µ—Å-WebApp</title>
    <link rel="stylesheet" href="/static/styles.css">
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
      (function() {
        const tg = window.Telegram?.WebApp;
        if (!tg) return;
        tg.ready();
        const uid = tg.initDataUnsafe?.user?.id;
        if (uid) {
          const url = new URL(window.location.href);
          if (!url.searchParams.has('user_id')) {
            url.searchParams.set('user_id', uid);
            window.location.replace(url.toString());
          }
        }
      })();
    </script>
  </head>
  
<body>
  <header>
    <h1>üèãÔ∏è –§–∏—Ç–Ω–µ—Å-WebApp</h1>
    {% set uid = request.query_params.get("user_id") %}
    {% if uid %}
    <nav>
      <a href="/?user_id={{ uid }}">–ì–ª–∞–≤–Ω–∞—è</a> |
      <a href="/profile?user_id={{ uid }}">–ü—Ä–æ—Ñ–∏–ª—å</a> |
      <a href="/workouts?user_id={{ uid }}">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</a>
    </nav>
    {% else %}
    <p style="color: red;">
      ‚ùó –û—Ç–∫—Ä–æ–π—Ç–µ WebApp –∏–∑ Telegram, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ.
    </p>
    {% endif %}
    <hr>
  </header>

  <main>
    {# –ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω {% block content %} #}
    {% block content %}
    {% endblock %}
  </main>

  <footer>
    <hr>
    <small>¬© 2025 –§–∏—Ç–Ω–µ—Å-WebApp</small>
  </footer>
</body>
</html>
